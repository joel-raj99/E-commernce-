{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///D:/project/E-commernce-/src/app/lib/db.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst connectDB = async () => {\r\n  if (mongoose.connections[0].readyState) return;\r\n\r\n  try {\r\n    await mongoose.connect(process.env.MONGODB_URI);\r\n    console.log(\"MongoDB connected\");\r\n  } catch (error) {\r\n    console.error(\"MongoDB connection error:\", error);\r\n  }\r\n};\r\n\r\nexport default connectDB;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,YAAY;IAChB,IAAI,oHAAQ,CAAC,WAAW,CAAC,EAAE,CAAC,UAAU,EAAE;IAExC,IAAI;QACF,MAAM,oHAAQ,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,WAAW;QAC9C,QAAQ,GAAG,CAAC;IACd,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;IAC7C;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///D:/project/E-commernce-/src/app/models/UserModels.js"],"sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst UserSchema = new mongoose.Schema({\r\n  username: { type: String, required: true },\r\n  email:    { type: String, required: true, unique: true },\r\n  password: { type: String, required: true },\r\n  role:     { type: String, enum: [\"admin\", \"user\"], default: \"user\" },\r\n});\r\n\r\nexport default mongoose.models.User || mongoose.model(\"User\", UserSchema);\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,aAAa,IAAI,oHAAQ,CAAC,MAAM,CAAC;IACrC,UAAU;QAAE,MAAM;QAAQ,UAAU;IAAK;IACzC,OAAU;QAAE,MAAM;QAAQ,UAAU;QAAM,QAAQ;IAAK;IACvD,UAAU;QAAE,MAAM;QAAQ,UAAU;IAAK;IACzC,MAAU;QAAE,MAAM;QAAQ,MAAM;YAAC;YAAS;SAAO;QAAE,SAAS;IAAO;AACrE;uCAEe,oHAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,oHAAQ,CAAC,KAAK,CAAC,QAAQ","debugId":null}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///D:/project/E-commernce-/src/app/api/auth/Signup/route.js"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport bcrypt from \"bcryptjs\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport connectDB from \"@/app/lib/db\";\r\nimport User from \"@/app/models/UserModels\";\r\n\r\nexport async function POST(req) {\r\n  try {\r\n    await connectDB();\r\n    const { username, email, password } = await req.json();\r\n\r\n    if (!username || !email || !password) {\r\n      return NextResponse.json({ message: \"All fields required\" }, { status: 400 });\r\n    }\r\n\r\n    const existingUser = await User.findOne({ email });\r\n    if (existingUser) {\r\n      return NextResponse.json({ message: \"User already exists\" }, { status: 400 });\r\n    }\r\n\r\n    // ✅ Make the first user the admin\r\n    const userCount = await User.countDocuments();\r\n    const role = userCount === 0 ? \"admin\" : \"user\";\r\n\r\n    const hashedPassword = await bcrypt.hash(password, 10);\r\n    const newUser = await User.create({ username, email, password: hashedPassword, role });\r\n\r\n    const token = jwt.sign(\r\n      { id: newUser._id, email: newUser.email, role: newUser.role },\r\n      process.env.JWT_SECRET,\r\n      { expiresIn: \"1d\" }\r\n    );\r\n\r\n    // ✅ Send response with cookie\r\n    const res = NextResponse.json({\r\n      message: \"Signup successful\",\r\n      user: {\r\n        id: newUser._id,\r\n        username: newUser.username,\r\n        email: newUser.email,\r\n        role: newUser.role,\r\n      },\r\n    });\r\n\r\n    res.cookies.set(\"token\", token, {\r\n      httpOnly: true,\r\n      secure: process.env.NODE_ENV === \"production\",\r\n      maxAge: 60 * 60 * 24,\r\n      path: \"/\",\r\n    });\r\n\r\n    return res;\r\n  } catch (error) {\r\n    console.error(error);\r\n    return NextResponse.json({ message: \"Server error\" }, { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AAEO,eAAe,KAAK,GAAG;IAC5B,IAAI;QACF,MAAM,IAAA,oIAAS;QACf,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,MAAM,IAAI,IAAI;QAEpD,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,UAAU;YACpC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAAsB,GAAG;gBAAE,QAAQ;YAAI;QAC7E;QAEA,MAAM,eAAe,MAAM,+IAAI,CAAC,OAAO,CAAC;YAAE;QAAM;QAChD,IAAI,cAAc;YAChB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAAsB,GAAG;gBAAE,QAAQ;YAAI;QAC7E;QAEA,kCAAkC;QAClC,MAAM,YAAY,MAAM,+IAAI,CAAC,cAAc;QAC3C,MAAM,OAAO,cAAc,IAAI,UAAU;QAEzC,MAAM,iBAAiB,MAAM,8IAAM,CAAC,IAAI,CAAC,UAAU;QACnD,MAAM,UAAU,MAAM,+IAAI,CAAC,MAAM,CAAC;YAAE;YAAU;YAAO,UAAU;YAAgB;QAAK;QAEpF,MAAM,QAAQ,kJAAG,CAAC,IAAI,CACpB;YAAE,IAAI,QAAQ,GAAG;YAAE,OAAO,QAAQ,KAAK;YAAE,MAAM,QAAQ,IAAI;QAAC,GAC5D,QAAQ,GAAG,CAAC,UAAU,EACtB;YAAE,WAAW;QAAK;QAGpB,8BAA8B;QAC9B,MAAM,MAAM,gJAAY,CAAC,IAAI,CAAC;YAC5B,SAAS;YACT,MAAM;gBACJ,IAAI,QAAQ,GAAG;gBACf,UAAU,QAAQ,QAAQ;gBAC1B,OAAO,QAAQ,KAAK;gBACpB,MAAM,QAAQ,IAAI;YACpB;QACF;QAEA,IAAI,OAAO,CAAC,GAAG,CAAC,SAAS,OAAO;YAC9B,UAAU;YACV,QAAQ,oDAAyB;YACjC,QAAQ,KAAK,KAAK;YAClB,MAAM;QACR;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAe,GAAG;YAAE,QAAQ;QAAI;IACtE;AACF","debugId":null}}]
}